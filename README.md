# üöÄ Crypto ETL Analytics

–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–Ω—ã–π –ø—Ä–æ–µ–∫—Ç –¥–ª—è –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å –ø–æ–ª–Ω—ã–º ETL-–ø–∞–π–ø–ª–∞–π–Ω–æ–º, –∏—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç—å—é –¥–∞–Ω–Ω—ã—Ö –∏ –≤–∏—Ç—Ä–∏–Ω–∞–º–∏ –¥–ª—è BI.

–ü—Ä–æ–µ–∫—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ production-like Data Platform —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤ Data Engineering.

---

## üìå –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π –ø—Ä–æ–µ–∫—Ç ‚Äî —ç—Ç–æ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Å —Ü–µ–ª—å—é –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤.

–í –æ—Å–Ω–æ–≤–µ –ª–µ–∂–∏—Ç –ø–∞–π–ø–ª–∞–π–Ω, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ API [Coincap.io](https://pro.coincap.io/api-docs/), –ø–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ—Ç –∏—Ö –∫ –∑–∞–≥—Ä—É–∑–∫–µ –∏ –∑–∞–≥—Ä—É–∂–∞–µ—Ç –≤ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∏—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö.

**Crypto ETL Analytics** ‚Äî —ç—Ç–æ end-to-end pipeline –¥–ª—è:

- üì• –ò–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ API Coincap  
- ‚öôÔ∏è –û–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥–∞–Ω–Ω—ã—Ö  
- üóÑ –ó–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ  
- üìä –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏—è –≤–∏—Ç—Ä–∏–Ω –∏ –¥–∞—à–±–æ—Ä–¥–æ–≤  
- üïí –ü–æ–¥–¥–µ—Ä–∂–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö  

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Å–ª–æ–∏

- **Raw layer** ‚Äî —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ API  
- **Core layer** ‚Äî –æ—á–∏—â–µ–Ω–Ω—ã–µ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ  
- **Data Mart** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –≤–∏—Ç—Ä–∏–Ω—ã (dbt)  
- **BI layer** ‚Äî Metabase dashboards  

---

## üõ† –°—Ç–µ–∫ –ø—Ä–æ–µ–∫—Ç–∞

- **Airflow** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏ –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è ETL-–∑–∞–¥–∞—á  
- **ClickHouse** ‚Äî –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö  
- **dbt** ‚Äî –º–æ–¥–µ–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω  
- **PySpark** ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö  
- **MinIO** ‚Äî S3-—Å–æ–≤–º–µ—Å—Ç–∏–º–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ  
- **Metabase** ‚Äî BI –∏ –¥–∞—à–±–æ—Ä–¥—ã  
- **Docker / docker-compose** ‚Äî –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã  

---

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–∞–π–ø–ª–∞–π–Ω

Extract:

-  Airflow –∑–∞–ø—É—Å–∫–∞–µ—Ç DAG –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é
-  –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∑–∞–ø—Ä–æ—Å –∫ Coincap API
-  –î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ raw —Å–ª–æ–π

Transform:
   
-  –û—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
-  –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤
-  –ù–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
-  –§–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ core —Å–ª–æ—è

Load:
   
-  –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ MinIO (raw/core)
-  –ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ ClickHouse
-  –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –∏—Å—Ç–æ—Ä–∏—á–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

Modeling (dbt):

-  –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –º–æ–¥–µ–ª–µ–π
-  –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ç—Ä–∏–Ω (data marts)
-  –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∞–≥—Ä–µ–≥–∞—Ç–æ–≤ –∏ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π

Visualization (Metabase):

-  Metabase –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ ClickHouse
-  –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã—Ö –¥–∞—à–±–æ—Ä–¥–æ–≤

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```text
crypto-etl-analytics/
‚îú‚îÄ‚îÄ airflow/            # DAG‚Äô–∏ –∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Airflow
‚îú‚îÄ‚îÄ spark/              # Spark jobs
‚îú‚îÄ‚îÄ dbt/                # –ú–æ–¥–µ–ª–∏ –∏ –≤–∏—Ç—Ä–∏–Ω—ã
‚îú‚îÄ‚îÄ docker/             # Docker-–∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îî‚îÄ‚îÄ docker-compose.yml  # –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
```
---

## üóÑ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### MinIO (Data Lake)

**Raw layer**
- `raw/assets` ‚Äî —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –∫—Ä–∏–ø—Ç–æ-–∞–∫—Ç–∏–≤–∞–º –∏–∑ Coincap API

**Core layer**
- `core/dim_assets` ‚Äî –æ—á–∏—â–µ–Ω–Ω—ã–µ –∏ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (dimension) –ø–æ –∞–∫—Ç–∏–≤–∞–º

---

### ClickHouse (DWH)

- `dim_assets` ‚Äî —Ç–∞–±–ª–∏—Ü–∞ –∏–∑–º–µ—Ä–µ–Ω–∏–π –ø–æ –∫—Ä–∏–ø—Ç–æ-–∞–∫—Ç–∏–≤–∞–º (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ `core/dim_assets`)

---

## üß© Data Marts (dbt)

–í–∏—Ç—Ä–∏–Ω—ã –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏ –¥–∞—à–±–æ—Ä–¥–æ–≤ (–ø–∞–ø–∫–∞ `models/marts`):

- `mart_daily_summary` ‚Äî –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –∞–≥—Ä–µ–≥–∞—Ç—ã –∏ —Å–≤–æ–¥–Ω—ã–µ –º–µ—Ç—Ä–∏–∫–∏
- `mart_market_overview` ‚Äî –æ–±–∑–æ—Ä —Ä—ã–Ω–∫–∞ (–∫–ª—é—á–µ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Ä—ã–Ω–∫–∞/–∞–∫—Ç–∏–≤–æ–≤)
- `mart_top_cryptos` ‚Äî —Ç–æ–ø –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –º–µ—Ç—Ä–∏–∫–∞–º

–§–∞–π–ª—ã –ø—Ä–æ–µ–∫—Ç–∞ dbt:
- `models/marts/mart_daily_summary.sql`
- `models/marts/mart_market_overview.sql`
- `models/marts/mart_top_cryptos.sql`
- `models/marts/_mart_top_cryptos.yml` ‚Äî –æ–ø–∏—Å–∞–Ω–∏–µ/—Å—Ö–µ–º–∞ –≤–∏—Ç—Ä–∏–Ω—ã

---

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### 1Ô∏è‚É£ –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/x-lerasim/crypto-etl-analytics.git
cd crypto-etl-analytics
```

### 2Ô∏è‚É£ –ó–∞–ø—É—Å–∫
```bash
docker-compose up -d --build 
```

---

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã:

| –°–µ—Ä–≤–∏—Å      | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                   | URL / –ü–æ—Ä—Ç              |
|------------|------------------------------|-------------------------|
| Airflow UI | –û—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DAG | http://localhost:8080   |
| Metabase   | BI –∏ –¥–∞—à–±–æ—Ä–¥—ã                | http://localhost:3000   |
| MinIO      | S3-—Ö—Ä–∞–Ω–∏–ª–∏—â–µ                 | http://localhost:9001   |
| ClickHouse | –ê–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∞—è –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö    | http://localhost:9000/play  |

---

## üîê –î–∞–Ω–Ω—ã–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é

| –°–µ—Ä–≤–∏—Å    | –õ–æ–≥–∏–Ω  | –ü–∞—Ä–æ–ª—å   |
|----------|--------|----------|
| Airflow  | airflow | airflow  |
| MinIO    | admin  | admin123 |
| ClickHouse | admin | admin    |
| Metabase | admin@crypto.local | CryptoAdmin_2026!    |

---

## –ü—Ä–∏–º–µ—Ä –¥–∞—à–±–æ—Ä–¥–∞
![preview](https://github.com/user-attachments/assets/d84880dc-69ad-450a-9ca0-f1813085065f)


